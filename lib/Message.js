const _0xf28fe=_0x2062;(function(_0x5020ef,_0x4e26bb){const _0x1fab7b=_0x2062,_0x356520=_0x5020ef();while(!![]){try{const _0x175ac5=-parseInt(_0x1fab7b(0x1f0))/0x1*(parseInt(_0x1fab7b(0x1f7))/0x2)+-parseInt(_0x1fab7b(0x208))/0x3+-parseInt(_0x1fab7b(0x1e1))/0x4+-parseInt(_0x1fab7b(0x1e4))/0x5*(parseInt(_0x1fab7b(0x1eb))/0x6)+parseInt(_0x1fab7b(0x207))/0x7+-parseInt(_0x1fab7b(0x1f6))/0x8+parseInt(_0x1fab7b(0x1fd))/0x9;if(_0x175ac5===_0x4e26bb)break;else _0x356520['push'](_0x356520['shift']());}catch(_0x2bbaa5){_0x356520['push'](_0x356520['shift']());}}}(_0x3e4b,0x1d47c));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require('crypto'),ff=require(_0xf28fe(0x206)),webp=require(_0xf28fe(0x202)),path=require(_0xf28fe(0x1e2));function _0x3e4b(){const _0x2d7479=['join','.mp4','test','-vcodec','utf-8','.webp','138648EtiCzo','path','categories','137450MSpwif','save','writeUIntLE','scale=512:512:force_original_aspect_ratio=increase,fps=15,crop=512:512','exif','.jpg','concat','36AWXpum','readUIntLE','addOutputOptions','data','-vf','1XPMiFE','error','toFormat','writeFileSync','author','load','1423552LIoJvi','316428aNQXRD','unlinkSync','length','packname','toString','webp','4941225ZIFlnu','readFileSync','from','https://AiDarkEzio.github.io','mimetype','node-webpmux','libwebp','randomBytes','end','fluent-ffmpeg','882742FywOFm','58317jUXfJK','stringify'];_0x3e4b=function(){return _0x2d7479;};return _0x3e4b();}async function imageToWebp(_0x5a2fd8){const _0x3930ff=_0xf28fe,_0x1043e6=path[_0x3930ff(0x20a)](__dirname,'../temp/'+Crypto[_0x3930ff(0x204)](0x6)[_0x3930ff(0x1ec)](0x0,0x6)['toString'](0x24)+'.webp'),_0x14400c=path['join'](__dirname,'../temp/'+Crypto[_0x3930ff(0x204)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x3930ff(0x1e9));fs[_0x3930ff(0x1f3)](_0x14400c,_0x5a2fd8),await new Promise((_0x55789f,_0x21e25a)=>{const _0x361ecf=_0x3930ff;ff(_0x14400c)['on'](_0x361ecf(0x1f1),_0x21e25a)['on'](_0x361ecf(0x205),()=>_0x55789f(!![]))['addOutputOptions'](['-vcodec',_0x361ecf(0x203),_0x361ecf(0x1ef),_0x361ecf(0x1e7)])[_0x361ecf(0x1f2)](_0x361ecf(0x1fc))[_0x361ecf(0x1e5)](_0x1043e6);});const _0x3cb04a=fs[_0x3930ff(0x1fe)](_0x1043e6);return fs[_0x3930ff(0x1f8)](_0x1043e6),fs[_0x3930ff(0x1f8)](_0x14400c),_0x3cb04a;}async function videoToWebp(_0x25ed51){const _0x1f7f9c=_0xf28fe,_0x19962e=path[_0x1f7f9c(0x20a)](tmpdir(),Crypto[_0x1f7f9c(0x204)](0x6)['readUIntLE'](0x0,0x6)[_0x1f7f9c(0x1fb)](0x24)+_0x1f7f9c(0x1e0)),_0x272dff=path['join'](tmpdir(),Crypto[_0x1f7f9c(0x204)](0x6)[_0x1f7f9c(0x1ec)](0x0,0x6)['toString'](0x24)+_0x1f7f9c(0x1dc));fs[_0x1f7f9c(0x1f3)](_0x272dff,_0x25ed51),await new Promise((_0x2834e6,_0x559d9a)=>{const _0x2fadb9=_0x1f7f9c;ff(_0x272dff)['on'](_0x2fadb9(0x1f1),_0x559d9a)['on'](_0x2fadb9(0x205),()=>_0x2834e6(!![]))[_0x2fadb9(0x1ed)]([_0x2fadb9(0x1de),_0x2fadb9(0x203),'-vf','scale=512:512:force_original_aspect_ratio=increase,fps=15,crop=512:512'])[_0x2fadb9(0x1f2)](_0x2fadb9(0x1fc))['save'](_0x19962e);});const _0x3342d2=fs[_0x1f7f9c(0x1fe)](_0x19962e);return fs[_0x1f7f9c(0x1f8)](_0x19962e),fs[_0x1f7f9c(0x1f8)](_0x272dff),_0x3342d2;}async function writeExifImg(_0x3f16ab,_0x4f85d8){const _0x4c66dc=_0xf28fe;let _0x3527a1=await imageToWebp(_0x3f16ab);const _0x3a4f19=path[_0x4c66dc(0x20a)](tmpdir(),Crypto['randomBytes'](0x6)[_0x4c66dc(0x1ec)](0x0,0x6)['toString'](0x24)+_0x4c66dc(0x1e0)),_0x52a643=path['join'](tmpdir(),Crypto[_0x4c66dc(0x204)](0x6)['readUIntLE'](0x0,0x6)[_0x4c66dc(0x1fb)](0x24)+_0x4c66dc(0x1e0));fs['writeFileSync'](_0x3a4f19,_0x3527a1);if(_0x4f85d8[_0x4c66dc(0x1fa)]||_0x4f85d8['author']){const _0x5c9fe2=new webp['Image'](),_0x8010da={'sticker-pack-id':'https://AiDarkEzio.github.io','sticker-pack-name':_0x4f85d8[_0x4c66dc(0x1fa)],'sticker-pack-publisher':_0x4f85d8[_0x4c66dc(0x1f4)],'emojis':_0x4f85d8['categories']?_0x4f85d8['categories']:['']},_0x2b023e=Buffer[_0x4c66dc(0x1ff)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x216b20=Buffer['from'](JSON[_0x4c66dc(0x209)](_0x8010da),_0x4c66dc(0x1df)),_0x3801d5=Buffer[_0x4c66dc(0x1ea)]([_0x2b023e,_0x216b20]);return _0x3801d5[_0x4c66dc(0x1e6)](_0x216b20['length'],0xe,0x4),await _0x5c9fe2['load'](_0x3a4f19),fs['unlinkSync'](_0x3a4f19),_0x5c9fe2['exif']=_0x3801d5,await _0x5c9fe2['save'](_0x52a643),_0x52a643;}}function _0x2062(_0x443150,_0x408f76){const _0x3e4bde=_0x3e4b();return _0x2062=function(_0x2062b2,_0xbcea44){_0x2062b2=_0x2062b2-0x1dc;let _0x4626be=_0x3e4bde[_0x2062b2];return _0x4626be;},_0x2062(_0x443150,_0x408f76);}async function writeExifVid(_0x70ae23,_0x809123){const _0x414791=_0xf28fe;let _0x56136e=await videoToWebp(_0x70ae23);const _0x34f300=path[_0x414791(0x20a)](tmpdir(),Crypto[_0x414791(0x204)](0x6)[_0x414791(0x1ec)](0x0,0x6)[_0x414791(0x1fb)](0x24)+'.webp'),_0x20346d=path[_0x414791(0x20a)](tmpdir(),Crypto[_0x414791(0x204)](0x6)[_0x414791(0x1ec)](0x0,0x6)[_0x414791(0x1fb)](0x24)+'.webp');fs[_0x414791(0x1f3)](_0x34f300,_0x56136e);if(_0x809123[_0x414791(0x1fa)]||_0x809123[_0x414791(0x1f4)]){const _0x40900e=new webp['Image'](),_0x4867fc={'sticker-pack-id':_0x414791(0x200),'sticker-pack-name':_0x809123[_0x414791(0x1fa)],'sticker-pack-publisher':_0x809123[_0x414791(0x1f4)],'emojis':_0x809123[_0x414791(0x1e3)]?_0x809123['categories']:['']},_0x20e3fd=Buffer[_0x414791(0x1ff)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x25dd70=Buffer[_0x414791(0x1ff)](JSON[_0x414791(0x209)](_0x4867fc),'utf-8'),_0x5c6236=Buffer[_0x414791(0x1ea)]([_0x20e3fd,_0x25dd70]);return _0x5c6236[_0x414791(0x1e6)](_0x25dd70[_0x414791(0x1f9)],0xe,0x4),await _0x40900e[_0x414791(0x1f5)](_0x34f300),fs[_0x414791(0x1f8)](_0x34f300),_0x40900e['exif']=_0x5c6236,await _0x40900e[_0x414791(0x1e5)](_0x20346d),_0x20346d;}}async function writeExif(_0x1ad247,_0x152674){const _0x4d9e0a=_0xf28fe;let _0x44b5f6=/webp/[_0x4d9e0a(0x1dd)](_0x1ad247[_0x4d9e0a(0x201)])?_0x1ad247[_0x4d9e0a(0x1ee)]:/image/['test'](_0x1ad247[_0x4d9e0a(0x201)])?await imageToWebp(_0x1ad247[_0x4d9e0a(0x1ee)]):/video/[_0x4d9e0a(0x1dd)](_0x1ad247[_0x4d9e0a(0x201)])?await videoToWebp(_0x1ad247[_0x4d9e0a(0x1ee)]):'';const _0x44927f=path[_0x4d9e0a(0x20a)](tmpdir(),Crypto[_0x4d9e0a(0x204)](0x6)[_0x4d9e0a(0x1ec)](0x0,0x6)[_0x4d9e0a(0x1fb)](0x24)+_0x4d9e0a(0x1e0)),_0x544fba=path[_0x4d9e0a(0x20a)](tmpdir(),Crypto[_0x4d9e0a(0x204)](0x6)[_0x4d9e0a(0x1ec)](0x0,0x6)['toString'](0x24)+_0x4d9e0a(0x1e0));fs[_0x4d9e0a(0x1f3)](_0x44927f,_0x44b5f6);if(_0x152674[_0x4d9e0a(0x1fa)]||_0x152674['author']){const _0xeafae8=new webp['Image'](),_0x1d04f5={'sticker-pack-id':'https://AiDarkEzio.github.io','sticker-pack-name':_0x152674[_0x4d9e0a(0x1fa)],'sticker-pack-publisher':_0x152674[_0x4d9e0a(0x1f4)],'emojis':_0x152674[_0x4d9e0a(0x1e3)]?_0x152674['categories']:['']},_0xee3961=Buffer[_0x4d9e0a(0x1ff)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x441889=Buffer[_0x4d9e0a(0x1ff)](JSON[_0x4d9e0a(0x209)](_0x1d04f5),'utf-8'),_0x4e2de0=Buffer['concat']([_0xee3961,_0x441889]);return _0x4e2de0[_0x4d9e0a(0x1e6)](_0x441889[_0x4d9e0a(0x1f9)],0xe,0x4),await _0xeafae8['load'](_0x44927f),fs[_0x4d9e0a(0x1f8)](_0x44927f),_0xeafae8[_0x4d9e0a(0x1e8)]=_0x4e2de0,await _0xeafae8['save'](_0x544fba),_0x544fba;}}module['exports']={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};
