const _0x32e394=_0xfd8a;(function(_0xb409ee,_0x46f5b4){const _0x3bdaa7=_0xfd8a,_0x51131c=_0xb409ee();while(!![]){try{const _0x2938f6=-parseInt(_0x3bdaa7(0xd5))/0x1*(-parseInt(_0x3bdaa7(0xc7))/0x2)+parseInt(_0x3bdaa7(0xbe))/0x3*(-parseInt(_0x3bdaa7(0xbd))/0x4)+parseInt(_0x3bdaa7(0xd7))/0x5*(-parseInt(_0x3bdaa7(0xea))/0x6)+-parseInt(_0x3bdaa7(0xed))/0x7+-parseInt(_0x3bdaa7(0xbb))/0x8+parseInt(_0x3bdaa7(0xc5))/0x9*(-parseInt(_0x3bdaa7(0xd9))/0xa)+-parseInt(_0x3bdaa7(0xd6))/0xb*(-parseInt(_0x3bdaa7(0xe3))/0xc);if(_0x2938f6===_0x46f5b4)break;else _0x51131c['push'](_0x51131c['shift']());}catch(_0x281fd4){_0x51131c['push'](_0x51131c['shift']());}}}(_0x3e19,0x36c33));function _0x3e19(){const _0x590d8d=['https://github.com/Afx-Abu/Abu-MD','fluent-ffmpeg','node-webpmux','load','toFormat','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','69720WECQEs','unlinkSync','210804JWefWE','3RkGBtt','data','Image','save','error','utf-8','exif','36LPZRXj','00:00:00','334LZRtPz','from','-ss','.jpg','-vcodec','-an','-vsync','randomBytes','concat','mimetype','author','.webp','join','writeFileSync','1365eGhoyF','1956196DTtXMe','10blqlys','path','879170jPbspq','libwebp','addOutputOptions','length','.mp4','toString','-loop','default','-vf','webp','60EZFUcP','readFileSync','00:00:05','test','end','stringify','crypto','489030PSuzON','readUIntLE','writeUIntLE','2217138WqwQJp','categories','-preset','packname'];_0x3e19=function(){return _0x590d8d;};return _0x3e19();}const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(_0x32e394(0xe9)),ff=require(_0x32e394(0xf2)),webp=require(_0x32e394(0xf3)),path=require(_0x32e394(0xd8));async function imageToWebp(_0x24c751){const _0x58e5bc=_0x32e394,_0x573895=path[_0x58e5bc(0xd3)](tmpdir(),Crypto[_0x58e5bc(0xce)](0x6)['readUIntLE'](0x0,0x6)[_0x58e5bc(0xde)](0x24)+_0x58e5bc(0xd2)),_0x32d81a=path[_0x58e5bc(0xd3)](tmpdir(),Crypto[_0x58e5bc(0xce)](0x6)[_0x58e5bc(0xeb)](0x0,0x6)['toString'](0x24)+_0x58e5bc(0xca));fs[_0x58e5bc(0xd4)](_0x32d81a,_0x24c751),await new Promise((_0x22e0f1,_0x405656)=>{const _0x570be9=_0x58e5bc;ff(_0x32d81a)['on'](_0x570be9(0xc2),_0x405656)['on'](_0x570be9(0xe7),()=>_0x22e0f1(!![]))[_0x570be9(0xdb)](['-vcodec',_0x570be9(0xda),_0x570be9(0xe1),_0x570be9(0xba)])[_0x570be9(0xf5)](_0x570be9(0xe2))[_0x570be9(0xc1)](_0x573895);});const _0x3600fa=fs[_0x58e5bc(0xe4)](_0x573895);return fs[_0x58e5bc(0xbc)](_0x573895),fs[_0x58e5bc(0xbc)](_0x32d81a),_0x3600fa;}async function videoToWebp(_0x54310c){const _0xb40a92=_0x32e394,_0x520212=path[_0xb40a92(0xd3)](tmpdir(),Crypto['randomBytes'](0x6)[_0xb40a92(0xeb)](0x0,0x6)[_0xb40a92(0xde)](0x24)+_0xb40a92(0xd2)),_0x4b8522=path[_0xb40a92(0xd3)](tmpdir(),Crypto[_0xb40a92(0xce)](0x6)[_0xb40a92(0xeb)](0x0,0x6)['toString'](0x24)+_0xb40a92(0xdd));fs[_0xb40a92(0xd4)](_0x4b8522,_0x54310c),await new Promise((_0x376b7e,_0x1f4474)=>{const _0x486081=_0xb40a92;ff(_0x4b8522)['on']('error',_0x1f4474)['on'](_0x486081(0xe7),()=>_0x376b7e(!![]))[_0x486081(0xdb)]([_0x486081(0xcb),_0x486081(0xda),_0x486081(0xe1),_0x486081(0xba),_0x486081(0xdf),'0',_0x486081(0xc9),_0x486081(0xc6),'-t',_0x486081(0xe5),_0x486081(0xef),_0x486081(0xe0),_0x486081(0xcc),_0x486081(0xcd),'0'])[_0x486081(0xf5)](_0x486081(0xe2))[_0x486081(0xc1)](_0x520212);});const _0x22b1f4=fs['readFileSync'](_0x520212);return fs[_0xb40a92(0xbc)](_0x520212),fs['unlinkSync'](_0x4b8522),_0x22b1f4;}function _0xfd8a(_0x4a8bb7,_0x3c57bd){const _0x3e194d=_0x3e19();return _0xfd8a=function(_0xfd8aaa,_0x219cf4){_0xfd8aaa=_0xfd8aaa-0xba;let _0x473789=_0x3e194d[_0xfd8aaa];return _0x473789;},_0xfd8a(_0x4a8bb7,_0x3c57bd);}async function writeExifImg(_0x1402d5,_0x3580b6){const _0x2ef9a8=_0x32e394;let _0x4c1b1d=await imageToWebp(_0x1402d5);const _0x350a1e=path[_0x2ef9a8(0xd3)](tmpdir(),Crypto[_0x2ef9a8(0xce)](0x6)[_0x2ef9a8(0xeb)](0x0,0x6)['toString'](0x24)+'.webp'),_0x3c25d4=path[_0x2ef9a8(0xd3)](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x2ef9a8(0xde)](0x24)+'.webp');fs[_0x2ef9a8(0xd4)](_0x350a1e,_0x4c1b1d);if(_0x3580b6[_0x2ef9a8(0xf0)]||_0x3580b6[_0x2ef9a8(0xd1)]){const _0x285a32=new webp['Image'](),_0x360486={'sticker-pack-id':_0x2ef9a8(0xf1),'sticker-pack-name':_0x3580b6['packname'],'sticker-pack-publisher':_0x3580b6['author'],'emojis':_0x3580b6[_0x2ef9a8(0xee)]?_0x3580b6[_0x2ef9a8(0xee)]:['']},_0x54ce8a=Buffer[_0x2ef9a8(0xc8)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1fd3d6=Buffer[_0x2ef9a8(0xc8)](JSON['stringify'](_0x360486),_0x2ef9a8(0xc3)),_0x5afed4=Buffer[_0x2ef9a8(0xcf)]([_0x54ce8a,_0x1fd3d6]);return _0x5afed4['writeUIntLE'](_0x1fd3d6[_0x2ef9a8(0xdc)],0xe,0x4),await _0x285a32[_0x2ef9a8(0xf4)](_0x350a1e),fs['unlinkSync'](_0x350a1e),_0x285a32['exif']=_0x5afed4,await _0x285a32['save'](_0x3c25d4),_0x3c25d4;}}async function writeExifVid(_0xfacddf,_0xb3cfc7){const _0xb40fba=_0x32e394;let _0x7bbd6e=await videoToWebp(_0xfacddf);const _0x5de6e1=path[_0xb40fba(0xd3)](tmpdir(),Crypto[_0xb40fba(0xce)](0x6)[_0xb40fba(0xeb)](0x0,0x6)[_0xb40fba(0xde)](0x24)+'.webp'),_0x3b3dd3=path[_0xb40fba(0xd3)](tmpdir(),Crypto[_0xb40fba(0xce)](0x6)[_0xb40fba(0xeb)](0x0,0x6)[_0xb40fba(0xde)](0x24)+_0xb40fba(0xd2));fs['writeFileSync'](_0x5de6e1,_0x7bbd6e);if(_0xb3cfc7[_0xb40fba(0xf0)]||_0xb3cfc7[_0xb40fba(0xd1)]){const _0x40dfc6=new webp[(_0xb40fba(0xc0))](),_0x5d6f84={'sticker-pack-id':_0xb40fba(0xf1),'sticker-pack-name':_0xb3cfc7['packname'],'sticker-pack-publisher':_0xb3cfc7[_0xb40fba(0xd1)],'emojis':_0xb3cfc7['categories']?_0xb3cfc7['categories']:['']},_0x15bbaf=Buffer[_0xb40fba(0xc8)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x54799e=Buffer[_0xb40fba(0xc8)](JSON[_0xb40fba(0xe8)](_0x5d6f84),'utf-8'),_0x47e2f3=Buffer['concat']([_0x15bbaf,_0x54799e]);return _0x47e2f3['writeUIntLE'](_0x54799e[_0xb40fba(0xdc)],0xe,0x4),await _0x40dfc6[_0xb40fba(0xf4)](_0x5de6e1),fs[_0xb40fba(0xbc)](_0x5de6e1),_0x40dfc6['exif']=_0x47e2f3,await _0x40dfc6[_0xb40fba(0xc1)](_0x3b3dd3),_0x3b3dd3;}}async function writeExif(_0x3f0ed6,_0x1ae36d){const _0x58dffd=_0x32e394;let _0x145b31=/webp/['test'](_0x3f0ed6[_0x58dffd(0xd0)])?_0x3f0ed6[_0x58dffd(0xbf)]:/image/[_0x58dffd(0xe6)](_0x3f0ed6[_0x58dffd(0xd0)])?await imageToWebp(_0x3f0ed6['data']):/video/['test'](_0x3f0ed6[_0x58dffd(0xd0)])?await videoToWebp(_0x3f0ed6[_0x58dffd(0xbf)]):'';const _0x5a810a=path['join'](tmpdir(),Crypto[_0x58dffd(0xce)](0x6)[_0x58dffd(0xeb)](0x0,0x6)[_0x58dffd(0xde)](0x24)+_0x58dffd(0xd2)),_0x502b31=path[_0x58dffd(0xd3)](tmpdir(),Crypto[_0x58dffd(0xce)](0x6)[_0x58dffd(0xeb)](0x0,0x6)[_0x58dffd(0xde)](0x24)+'.webp');fs[_0x58dffd(0xd4)](_0x5a810a,_0x145b31);if(_0x1ae36d[_0x58dffd(0xf0)]||_0x1ae36d[_0x58dffd(0xd1)]){const _0x403ca6=new webp[(_0x58dffd(0xc0))](),_0x3f062d={'sticker-pack-id':_0x58dffd(0xf1),'sticker-pack-name':_0x1ae36d[_0x58dffd(0xf0)],'sticker-pack-publisher':_0x1ae36d['author'],'emojis':_0x1ae36d[_0x58dffd(0xee)]?_0x1ae36d[_0x58dffd(0xee)]:['']},_0x10e26b=Buffer[_0x58dffd(0xc8)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x49adda=Buffer[_0x58dffd(0xc8)](JSON[_0x58dffd(0xe8)](_0x3f062d),_0x58dffd(0xc3)),_0x492f89=Buffer['concat']([_0x10e26b,_0x49adda]);return _0x492f89[_0x58dffd(0xec)](_0x49adda[_0x58dffd(0xdc)],0xe,0x4),await _0x403ca6[_0x58dffd(0xf4)](_0x5a810a),fs[_0x58dffd(0xbc)](_0x5a810a),_0x403ca6[_0x58dffd(0xc4)]=_0x492f89,await _0x403ca6['save'](_0x502b31),_0x502b31;}}module['exports']={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};
